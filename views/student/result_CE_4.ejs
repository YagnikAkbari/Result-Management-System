<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/student.css" />
    <link rel="stylesheet" href="css/faculty.css" />
    <link rel="stylesheet" href="css/all_buttons.css" />
    <link rel="stylesheet" href="css/tableAlign.css" />
    <title><%= pageTitle %></title>
  </head>
  <body>
    <nav>
      <div class="container">
        <a href="/student"
          ><img src="images/ldrp_logo.png" alt="ldrp_logo"
        /></a>
        <div class="menus">
          <form action="/student_profile">
            <button type="submit" class="profileBtn btns">
              <img src="images/user.svg" alt="user" class="fa-icon" />
              Profile
            </button>
          </form>
          <form action="/logout" method="post">
            <button type="submit" class="submitBtn btns">
              <img src="images/logout.svg" alt="user" class="fa-icon" />
              Logout
            </button>
          </form>
        </div>
      </div>
    </nav>
    
    <div class="selection--search">
      <select id="semester" name="Division" class="drop-custom">
        <option value="sem" selected>Semester</option>
        <option value="1" <%= semester === '1' ? 'selected' : '' %>>SEM 1</option> 
        <option value="2" <%= semester === '2' ? 'selected' : '' %>>SEM 2</option> 
        <option value="3" <%= semester === '3' ? 'selected' : '' %>>SEM 3</option> 
        <option value="4" <%= semester === '4' ? 'selected' : '' %>>SEM 4</option> 
        <option value="5" <%= semester === '5' ? 'selected' : '' %>>SEM 5</option>
        <option value="6" <%= semester === '6' ? 'selected' : '' %>>SEM 6</option>
        <option value="7" <%= semester === '7' ? 'selected' : '' %>>SEM 7</option>
        <option value="8" <%= semester === '8' ? 'selected' : '' %>>SEM 8</option>
      </select>

      <form id="myForm"  method="post">
        <input id="semHidden" type="hidden" name="semester" value="" />
        <input
          type="submit"
          name="btnSearch"
          value="Search"
          class="btn-search"
          id="btn-search"
        />
      </form>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col left-border">sr.no</th>
          <th scope="col">subject code</th>
          <th scope="col">subject name</th>
          <th scope="col">marks</th>
          <th scope="col right-border">status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td scope="row">1.</td>
          <td><%= result.Sub1_Code %></td>
          <td><%= result.Sub1_Name %></td>
          <td><%= result.Sub1_Marks %></td>
          <% if (result.Sub1_Marks >= 12) { %>
            <td><img src="images/pass.svg" alt="pass" class="pass" /></td>
            <% } else if (result.Sub1_Marks < 12) { %>
              <td><img src="images/remid.svg" alt="remid" class="remid" /></td>
            <% } else { %>
              <td>
                <img src="images/absent.svg" alt="absent" class="absent" />
              </td>
            <% } %>
        </tr>
        <tr>
          <td scope="row">2.</td>
          <td><%= result.Sub2_Code %></td>
          <td><%= result.Sub2_Name %></td>
          <td><%= result.Sub2_Marks %></td>
          <% if (result.Sub2_Marks >= 12) { %>
            <td><img src="images/pass.svg" alt="pass" class="pass" /></td>
            <% } else if (result.Sub2_Marks < 12) { %>
              <td><img src="images/remid.svg" alt="remid" class="remid" /></td>
            <% } else { %>
              <td>
                <img src="imges/absent.svg" alt="absent" class="absent" />
              </td>
            <% } %>
        </tr>
        <tr>
          <td scope="row">3.</td>
          <td><%= result.Sub3_Code %></td>
          <td><%= result.Sub3_Name %></td>
          <td><%= result.Sub3_Marks %></td>
          <% if (result.Sub3_Marks >= 12) { %>
            <td><img src="images/pass.svg" alt="pass" class="pass" /></td>
            <% } else if (result.Sub3_Marks < 12) { %>
              <td><img src="images/remid.svg" alt="remid" class="remid" /></td>
            <% } else { %>
              <td>
                <img src="images/absent.svg" alt="absent" class="absent" />
              </td>
            <% } %>
        </tr>
        <tr>
          <td scope="row">4.</td>
          <td><%= result.Sub4_Code %></td>
          <td><%= result.Sub4_Name %></td>
          <td><%= result.Sub4_Marks %></td>
          <% if (result.Sub4_Marks >= 12) { %>
            <td><img src="images/pass.svg" alt="pass" class="pass" /></td>
            <% } else if (result.Sub4_Marks < 12) { %>
              <td><img src="images/remid.svg" alt="remid" class="remid" /></td>
            <% } else { %>
              <td>
                <img src="images/absent.svg" alt="absent" class="absent" />
              </td>
            <% } %>
        </tr>
        <tr>
          <td scope="row">5.</td>
          <td><%= result.Sub5_Code %></td>
          <td><%= result.Sub5_Name %></td>
          <td><%= result.Sub5_Marks %></td>
          <% if (result.Sub5_Marks >= 12) { %>
            <td><img src="images/pass.svg" alt="pass" class="pass" /></td>
            <% } else if (result.Sub5_Marks < 12) { %>
              <td><img src="images/remid.svg" alt="remid" class="remid" /></td>
            <% } else { %>
              <td>
                <img src="images/absent.svg" alt="absent" class="absent" />
              </td>
            <% } %>
        </tr>
      </tbody>
    </table>
    <script>
      const semesterDropdown = document.getElementById("semester");
      const myform = document.getElementById("myForm");

      let semesterSelectedValue;

      function handleDropdownChange() {
        semesterSelectedValue = semesterDropdown.value;

        document.getElementById("semHidden").value = semesterSelectedValue;
        myform.action = `result${semesterSelectedValue}`;
      }


      semesterDropdown.addEventListener("change", handleDropdownChange);
    </script>
  </body>
</html>
